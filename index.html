<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒœã‚¹è¨ä¼ã‚²ãƒ¼ãƒ  å®Œå…¨ç‰ˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#111;color:#fff;font-family:sans-serif;text-align:center}
#boss{font-size:80px;margin-top:30px}
#hpbar{width:80%;height:20px;background:#333;margin:10px auto}
#hp{height:100%;background:#f44;width:100%}
button{font-size:18px;padding:12px 20px;margin:6px}
.panel{border:1px solid #555;margin:10px;padding:10px}
</style>
</head>
<body>

<h1>âš”ï¸ ãƒœã‚¹è¨ä¼ã‚²ãƒ¼ãƒ </h1>

<div id="boss">ğŸ‰</div>
<div id="hpbar"><div id="hp"></div></div>
HP: <span id="hpText"></span>

<div class="panel">
<button onclick="attack()">æ”»æ’ƒï¼</button>
</div>

<div class="panel">
â± ã‚¿ã‚¤ãƒ : <span id="time">0.0</span>s
</div>

<div class="panel">
ğŸ’° ã‚³ã‚¤ãƒ³: <span id="coin">0</span><br>
ğŸ’ ãƒ€ã‚¤ãƒ¤: <span id="dia">0</span><br>
<button onclick="exchange()">ğŸ’°1000 â†’ ğŸ’1</button>
</div>

<div class="panel">
<h3>ğŸ° é€šå¸¸ã‚¬ãƒãƒ£</h3>
<button onclick="gacha()">å›ã™ï¼ˆã‚³ã‚¤ãƒ³ï¼‰</button>
<div id="gachaResult"></div>
</div>

<div class="panel">
<h3>ğŸ’ ä¸Šä½ã‚¬ãƒãƒ£</h3>
<button onclick="diaGacha()">å›ã™ï¼ˆğŸ’1ï¼‰</button>
<div id="diaResult"></div>
</div>

<div class="panel">
âš”ï¸ æ”»æ’ƒåŠ›è£œæ­£: <span id="atk">1.0</span>
</div>

<script>
let bossHpMax = 100;
let bossHp = bossHpMax;
let atk = 1.0;
let coin = 0;
let dia = 0;
let startTime = Date.now();

/* ===== è¡¨ç¤ºæ›´æ–° ===== */
function update(){
  document.getElementById("hp").style.width = (bossHp/bossHpMax*100)+"%";
  document.getElementById("hpText").textContent = Math.max(0,bossHp);
  document.getElementById("coin").textContent = coin;
  document.getElementById("dia").textContent = dia;
  document.getElementById("atk").textContent = atk.toFixed(2);
  document.getElementById("time").textContent =
    ((Date.now()-startTime)/1000).toFixed(1);
}
update();

/* ===== æ”»æ’ƒ ===== */
function attack(){
  bossHp -= atk;
  if(bossHp<=0){
    bossHp=0;
    clearBoss();
  }
  update();
}

/* ===== ãƒœã‚¹æ’ƒç ´ ===== */
function clearBoss(){
  const time = ((Date.now()-startTime)/1000).toFixed(1);
  coin += 50;
  alert("ğŸ‰ æ’ƒç ´ï¼\nã‚¿ã‚¤ãƒ ï¼š"+time+"ç§’\nğŸ’°+50");
  bossHpMax += 50;
  bossHp = bossHpMax;
  startTime = Date.now();
}

/* ===== ã‚³ã‚¤ãƒ³â†’ãƒ€ã‚¤ãƒ¤ ===== */
function exchange(){
  if(coin<1000){
    alert("ã‚³ã‚¤ãƒ³ä¸è¶³ï¼");
    return;
  }
  coin -= 1000;
  dia += 1;
  update();
}

/* ===== é€šå¸¸ã‚¬ãƒãƒ£ï¼ˆç°¡æ˜“ï¼‰ ===== */
function gacha(){
  if(coin<100){
    alert("ã‚³ã‚¤ãƒ³ä¸è¶³");
    return;
  }
  coin -= 100;
  atk += 0.1;
  document.getElementById("gachaResult").textContent =
    "âœ¨ ãƒ¬ã‚¢ä»¥ä¸Šï¼ æ”»æ’ƒåŠ›+0.1";
  update();
}

/* ===== ğŸ’ ä¸Šä½ã‚¬ãƒãƒ£ ===== */
function diaGacha(){
  if(dia<1){
    alert("ãƒ€ã‚¤ãƒ¤ä¸è¶³");
    return;
  }
  dia--;

  const r = Math.random()*100;
  let result, add;

  if(r<40){
    result="ğŸ’¥ ãƒã‚¤ãƒ‘ãƒ¼ãƒ¬ã‚¢";
    add=0.5;
  }else if(r<80){
    result="ğŸŒŸ ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢";
    add=1.0;
  }else{
    result="ğŸ‘‘ ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ãƒ¬ã‚¢";
    add=1.5;
  }

  atk += add;
  document.getElementById("diaResult").textContent =
    result+"ï¼ æ”»æ’ƒåŠ›+"+add;

  update();
}
</script>

</body>
</html>
